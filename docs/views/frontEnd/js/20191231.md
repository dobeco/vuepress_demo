---
title: JavaScript函数收集
date: 2019-12-31
sidebar: auto
tags:
  - JavaScript
categories:
  - 前端
---

### 插入文本浏览器兼容

```js
function getInnerText(element) {
	return typeof element.textContent == "string"
		? element.textContent
		: element.innerText;
}

function setInnerText(element, text) {
	if (typeof element.textContent == "string") {
		element.textContent = text;
	} else {
		element.innerText = text;
	}
}

setInnerText(div, "Hello World!");
console.log(getInnerText(div)); // "Hello World"
```

这两个函数都接收一个函数作为参数，然后检查这个元素是不是有 textContent 属性。如果有，那么 typeof element.textContent 应该是‘string’；如果没有，那么这两个后汉书就会改为使用 innerText

### 确认元素的大小

```js
function getRoundingClientRect(element) {
	var scrollTop = doucment.documentElement.scrollTop;
	var scrollLeft = doucment.documentElement.scrollLeft;
	if (element.getRoundClientRect) {
		if (element.getRoundingClientRect) {
			var temp = document.createelement("div");
			temp.style.cssText = "position:absolute;left:0;top:0";
			document.body.appendChild(temp);
			arguments.callee.offset = -temp.getRoundingClientRect().top - scrollTop;
			document.body.removeChild(temp);
			temp = null;
		}
		var rect = element.getRoundingClientRect();
		var offset = arguments.call.offset;
		return {
			left: rect.left + offset,
			right: rect.right + offset,
			top: rect.top + offset,
			bottom: rect.bottom + offset
		};
	} else {
    var actualLeft = getElementLeft(element);
    var actualTop = getElementTop(element);
    return {
      left: actualLeft-scrollLeft,
      right: actualLeft + element.offsetWidth - scrollLeft,
      top: actualTop - scrollTop,
      bottom: actualTop + element.offsetHeight - scrollTop
    }
  }
}
```
